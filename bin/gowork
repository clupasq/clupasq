#!/bin/bash

NAME=taxify-server

cd ~/repos/taxify/server


if tmux has-session -t $NAME 2> /dev/null; then
  # session already exists; connect to it
  tmux attach -t $NAME
  exit
fi


# session does not exist; let's create it
tmux new-session -s $NAME -d

tmux rename-window -t $NAME "code"
tmux send-keys -t $NAME "vim src/all.js" C-m


tmux new-window -t $NAME
tmux rename-window -t $NAME "git"

tmux send-keys -t $NAME "git status" C-m
tmux split-window -h -p 25 -t $NAME
tmux send-keys -t $NAME "yarn compile:watch" C-m
tmux select-pane -t $NAME -p -L
tmux select-window -t $NAME -p

# go back to first pane
tmux select-pane -t :.+

tmux -2 attach-session -t $NAME

